---
sidebar_position: 1
title: درخواست پرداخت
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from "@theme/CodeBlock";
import requestTs from "!!raw-loader!../../../../../snippets/usage/request.ts";
import requestJs from "!!raw-loader!../../../../../snippets/usage/request.js";

درایور مورد نظر خود را با `getPaymentDriver` بسازید و از متد `requestPayment` استفاده کنید. این متد یک ورودی به صورت آبجکت دریافت می‌کند که شامل فیلد های `callbackUrl`، `amount` و سایر فیلد های مخصوص به درایور مورد استفاده است.

<Tabs>
  <TabItem value="javascript" label="JavaScript" default>
    <CodeBlock className="language-js" title="index.js">
      {requestJs}
    </CodeBlock>
  </TabItem>
  <TabItem value="typescript" label="TypeScript">
    <CodeBlock className="language-ts" title="index.ts">
      {requestTs}
    </CodeBlock>
  </TabItem>
</Tabs>

:::note نکته
متد `requestPayment` ممکن است استثنای `RequestPaymentException` را بیندازد.
:::

مقدار برگشتی متد `requestPayment`, یک کلاس است که موارد زیر را شامل می‌شود:

1. اطلاعات در‌مورد پرداخت

   - `referenceId`: شمارنده یکتا‌ای که به پرداخت فعلی ارجاع دارد، این شمارنده را در جایی ذخیره کنید.

2. اطلاعات در‌مورد نحوه انتقال کاربر

   - `url`: لینکی که باید کاربر را به آن بفرستید
   - `method`: روشی که باید به آن کاربر را بفرستید. با‌توجه به درایور مورد استفاده می تواند `GET` یا `POST` باشد
   - `params`: اطلاعاتی که باید همراه با کاربر ارسال شوند
