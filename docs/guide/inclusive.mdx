---
sidebar_position: 2
title: 'The Inclusive API'
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import configExclusiveTs from '!!raw-loader!./snippets/inclusive/config.ts';
import configExclusiveJs from '!!raw-loader!./snippets/inclusive/config.js';
import requestInclusiveTs from '!!raw-loader!./snippets/inclusive/request.ts';
import requestInclusiveJs from '!!raw-loader!./snippets/inclusive/request.js';
import verifyInclusiveTs from '!!raw-loader!./snippets/inclusive/verify.ts';
import verifyInclusiveJs from '!!raw-loader!./snippets/inclusive/verify.js';

This API is for when you want to multiple services at the same time.
For instance, when you let your users decide which payment service they wanna use for their transactions.

## Configuration

You can keep your configuration in a separated js file.

<Tabs>
  <TabItem value="typescript" label="TypeScript" default>
    <CodeBlock className="language-ts" title="polypay-config.ts">
      {configExclusiveTs}
    </CodeBlock>
  </TabItem>
  <TabItem value="javascript" label="JavaScript">
    <CodeBlock className="language-js" title="polypay-config.js">
      {configExclusiveJs}
    </CodeBlock>
  </TabItem>
</Tabs>

## Request For Payment

Get the driver using `getPaymentDriver` and use the `request` function. Note that you don't need to pass `merchantId` and the other options that you've already passed with the config object.

<Tabs>
  <TabItem value="typescript" label="TypeScript" default>
    <CodeBlock className="language-ts" title="index.ts">
      {requestInclusiveTs}
    </CodeBlock>
  </TabItem>
  <TabItem value="javascript" label="JavaScript">
    <CodeBlock className="language-js" title="index.js">
      {requestInclusiveJs}
    </CodeBlock>
  </TabItem>
</Tabs>

:::note
the `purchase` function might throw `PaymentException`
:::

## Verify The Payment

Get the driver using `getPaymentDriver` and use the `verify` function. You should pass 2 arguments to this function:

1. an object, containing `amount` of purchase.
2. the express/fastify/koa/etc. Request object. (It must have a `query` field on it.)

<Tabs>
  <TabItem value="typescript" label="TypeScript" default>
    <CodeBlock className="language-ts" title="index.ts">
      {verifyInclusiveTs}
    </CodeBlock>
  </TabItem>
  <TabItem value="javascript" label="JavaScript">
    <CodeBlock className="language-js" title="index.js">
      {verifyInclusiveJs}
    </CodeBlock>
  </TabItem>
</Tabs>

:::note
the `verify` function might throw `VerificationException`
:::
